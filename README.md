[![Pipeline](https://gitlab.elias-haeussler.de/eliashaeussler/composer-update-check/badges/master/pipeline.svg)](https://gitlab.elias-haeussler.de/eliashaeussler/composer-update-check/-/pipelines)
[![Coverage](https://gitlab.elias-haeussler.de/eliashaeussler/composer-update-check/badges/master/coverage.svg)](https://gitlab.elias-haeussler.de/eliashaeussler/composer-update-check/-/pipelines)
[![Packagist](https://badgen.net/packagist/v/eliashaeussler/composer-update-check)](https://packagist.org/packages/eliashaeussler/composer-update-check)
[![Docker](https://img.shields.io/docker/v/eliashaeussler/composer-update-check?label=docker&sort=semver)](https://hub.docker.com/r/eliashaeussler/composer-update-check)
[![License](https://badgen.net/packagist/license/eliashaeussler/composer-update-check)](LICENSE)
[![Documentation](https://badgen.net/badge/read/the%20docs/cyan)](https://docs.elias-haeussler.de/composer-update-check/)

# Composer update check plugin

> Composer Plugin to check outdated packages, based on their requirements

## Installation

```bash
composer req --dev eliashaeussler/composer-update-check
```

## Usage

```bash
# Check all root requirements
composer update-check

# Skip dev-requirements
composer update-check --no-dev

# Exclude custom packages from update check
composer update-check -i "my-vendor/*" -i "roave/security-advisories"

# Exclude dev-requirements and custom packages
composer update-check -i "my-vendor/*" --no-dev
```

### Usage with Docker

```bash
# Use latest version (Composer v2)
docker run --rm -it -v $(pwd):/app eliashaeussler/composer-update-check

# Use latest version (Composer v1)
docker run --rm -it -v $(pwd):/app eliashaeussler/composer-update-check:v1

# Use specific version (Composer v2)
docker run --rm -it -v $(pwd):/app eliashaeussler/composer-update-check:0.6.0

# Use specific version (Composer v1)
docker run --rm -it -v $(pwd):/app eliashaeussler/composer-update-check:0.6.0-v1
```

Read more about usage with Docker in the
[documentation](https://docs.elias-haeussler.de/composer-update-check/docker.html).

### Additional security scan

In addition to the basic usage, outdated packages can also be scanned
for security vulnerabilities. Using the `--security-scan` (shorthand: `-s`)
parameter one can easily check if any of the outdated packages are
insecure.

The security scan is being performed by the Composer package
[sensiolabs/security-checker](https://packagist.org/packages/sensiolabs/security-checker).
For this, the `composer.lock` file is passed to the external Symfony
scan service.

### Format output as JSON

All outputs generated by the `update-check` command can be formatted
as JSON using the `--json` (shorthand: `-j`) parameter:

```bash
composer update-check --json
```

## Development

### Preparation

```bash
# Clone repository
git clone https://gitlab.elias-haeussler.de/eliashaeussler/composer-update-check.git
cd composer-update-check

# Install Composer dependencies
composer install
```

### Run tests

Unit tests of this plugin can be executed using the provided Composer
script `test`. You can pass all available arguments to PHPUnit.

```bash
# Run tests
composer test

# Run tests and print coverage result
composer test -- --coverage-text
```

### Simulate application

A Composer script `simulate` exists which lets you run the Composer
command `update-check`, which is provided by this plugin. All parameters
passed to the script will be redirected to the Composer command.

```bash
# Run "composer update-check" command without parameters
composer simulate

# Pass parameters to "composer update-check" command
composer simulate -- -i "composer/*"
composer simulate -- --no-dev
```

Alternatively, this script can be called without Composer context:

```bash
./bin/simulate-application.sh
```

## License

[GPL 3.0 or later](LICENSE)
